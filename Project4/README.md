<center>
<h1>Programming Assignment 4<br>
PHP Scripting</h1>
</center>
<hr>
<h2>Description</h2>
<p>
The goal of this project is to 
learn server-side web programming using PHP.
More specifically, you will develop an e-commerce web application where customers can buy products
listed by the eBay Commerce Network API for Shopping.
</p>
<p>
This project must be done individually. No copying is permitted. 
<b>Note: We will use a system for detecting software plagiarism, called
<a href="http://theory.stanford.edu/~aiken/moss/" target="_top">Moss</a>,
which is an automatic system for determining the similarity of programs.</b>
That is, your program will be compared with the programs of the other students in class
as well as with the programs submitted in previous years.
</p>
<p>
Note that, if you use a Search Engine to find similar programs on the web, we will find these programs too.
So don't do it because you will get caught and you will get an F in the course (this is cheating).
Don't look for code to use for your project on the web or from other students (current or past).
Just do your project alone using the help given in this project description and from your instructor and GTA only.
Finally, you should not post your code nor deploy your project on a public web site.
</p>
<h2>Platform</h2>
<p>
As in Projects #2 and #3, you will develop this project on your PC/laptop using XAMPP
and you will test it using using your Mozilla Firefox web browser.
Download the project4 files <a href="project4.zip">project4.zip</a>.
Unarchive the files inside your web server document root directory.
The project4 directory contains the file <tt>buy.php</tt>, which needs to be changed
as described in the description of the web application.
You can test your setup on your web browser by using the URL address
<a href="http://localhost/project4/buy.php" target="_top">http://localhost/project4/buy.php</a><br>
</p>
<h2>Documentation</h2>
<p>
The following are tutorials on PHP. Use them as a reference only. 
</p>
<ul>
<li><a href="http://www.w3schools.com/php/default.asp" target="_top">PHP Tutorial</a></li>
<li><a href="http://www.cs.rochester.edu/courses/210/spring2011/lectures/005/" target="_top">PHP</a></li>
<li> <a href="http://php.net/manual/en/" target="_top">PHP.net</a>, especially the
<a href="http://php.net/manual/en/simplexml.examples-basic.php" target="_top">SimpleXML</a> interface
</li></ul>
You will use PHP sessions and the PHP SimpleXML interface.
Using SimpleXML, to access all children of $x with tag A, use $x-&gt;A.
To access the value of an attribute A of an element $x, use  $x['A'].
You CANNOT store PHP Objects in $_SESSION;
To store a SimpleXML value $x in the $_SESSION, you need to coerce it to a string first using (string)$x.
<pre>$xmlstr = file_get_contents('someURL.com');
$xml = new SimpleXMLElement($xmlstr);
foreach ($xml-&gt;BookList-&gt;BookData as $b)
    foreach ($b-&gt;Prices-&gt;Price as $p)
        if ($p['store_id'] == "amazon")
            print $b['isbn'] . ' ' . $b-&gt;Title[0] . ' ' . $p['price'] . "\n";
</pre>
<p>
</p><h2>Project Requirements</h2>
<p>
You will develop a trivial web application that allows customers to buy products.
You need to reverse-engineer my PHP script:
</p><pre><a href="https://lambda.uta.edu/cgi-bin/php/buy.php" target="_top">https://lambda.uta.edu/cgi-bin/php/buy.php</a>
</pre>
by filling out its forms and by looking at the HTML source that is generated by this script.
Your task is to modify your own <tt>buy.php</tt> script in your <tt>project4</tt> directory
to make it behave like my <tt>buy.php</tt>, although you should make your script generate better HTML code to look nicer.
<p>
You will use the shopping.com API for shopping.
The <a href="https://ebaycommercenetwork.force.com/publisher/s/categoryhome/P_API" target="_top">eBay Commerce Network API</a> ("ECN API") is a flexible way to access and recreate practically everything you see on Shopping.com. You need to get your own API key or use a <a href="http://developer.ebaycommercenetwork.com/docs/read/API_Demo_Credentials" target="_top">demo API key</a>.
You will use the <a href="http://developer.ebaycommercenetwork.com/docs/API_Use_Cases#1" target="_top">Search by keyword</a> method
and the <a href="http://developer.ebaycommercenetwork.com/docs/API_Use_Cases#35" target="_top">Requesting category tree information -&gt; Include all descendants in category tree</a> method
from the eBay Commerce Network Publisher API Use Cases.
</p><p>
Your search form must have a menu to select a category, a text window to specify search keywords, and a submit button.
The menu must contain all sub-categories of the category "computers" (whose id is 72).
The menu items should not be handwritten in the code;
instead, they must be generated in your PHP code by requesting all the descendants of the category tree with id=72 (the computers category).
The result of a keyword search must contain up to 20 products within the selected category that best match the keyword query.
Each product contains a link productOffersURL to the shopping.com web page that gives a detailed description
of the product and a list of best offers from various sellers.
So each product has a range minPrice - maxPrice of the prices offered by these sellers.
We will ignore the list of offers and we will assume that when we buy this product we pay the minPrice.
</p>
<p>
You need to use a PHP session to store the shopping basket (the list of chosen items throughout the session)
as well as the results of the previous search.
For each chosen item,
you store the Id, the name, the minPrice, the first image, and the productOffersURL (the link to the shopping.com web page that lists the best offers for this item).
Your PHP script must be able to handle the following query strings:
</p><ul>
<li> To search for all items in the "Laptops" category that match the search keywords "samsung i7":
<pre>buy.php?category=9007&amp;search=samsung+i7
</pre>
This should call the web service
request <tt>http://sandbox.api.ebaycommercenetwork.com/publisher/3.0/rest/GeneralSearch?apiKey=xxx&amp;trackingId=yyy&amp;categoryId=9007&amp;keyword=samsung+i7&amp;numItems=20</tt>,
where <tt>xxx</tt> and <tt>yyy</tt> are your access apiKey and your trackingId.
The web service results will arrive in XML.
To see how the XML data look like, cut and paste this URL on your browser and look at the reply.
<p>
</p></li><li>To put a listed item with id=138681275 in the shopping basket (if it does not exist):
<pre>buy.php?buy=138681275
</pre>
Your script should look at the results of the last search stored in <tt>$_SESSION</tt> to find the item under this Id and should copy
it into the shopping basket.
<p>
</p></li><li> To remove a listed item with Id=138681275 from the shopping basket (if exists):
<pre>buy.php?delete=138681275
</pre>
</li><li>To clear the shopping basket:
<pre>buy.php?clear=1
</pre> 
</li></ul>
<p></p>
<p>
Hints: you may use the PHP function <a href="http://us3.php.net/manual/en/function.print-r.php" target="_top">print_r</a> for debugging. It prints human-readable information about a variable.
</p>
